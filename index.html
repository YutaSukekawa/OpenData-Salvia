<!DOCTYPE html>
<html lang="ja">
    <head>
    	<!-- Required meta tags -->
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	    <script type="text/JavaScript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="./bootstrap-4.0.0-alpha.6-dist/css/bootstrap.min.css">

        <!-- Web Fonts -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dancing+Script|Satisfy">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Slabo+27px">
        <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/mplus1p.css" />

        <!-- My CSS -->
        <link rel="stylesheet" href="./css/box-btn.css">

        <!-- My JS -->
        <script type="text/JavaScript" src="./js/site-init.js"></script>
        <script type="text/JavaScript" src="./js/menu-item-onclick.js"></script>

    	<style>
	        html, body {

                /* 基本設定 */
                margin: 0;  /* 余白の削除 */
                padding: 0; /* 余白の削除 */
                height: 100%;   /* 縦の高さを100% */
                width: 100%;    /* 横の幅を100% */

                /* サイト背景 */
                /*background-image: linear-gradient(45deg, rgba(104, 175, 104, 0.6), rgba(59, 155, 179, 0.6)),
                                  url(img/header-cover.jpg);
                background-size: cover;*/

            }
	    </style>

        <!-- グローバル変数宣言 -->
        <script>
            var map;
        </script>

        <title>OpenData Salvia</title>
    </head>

    <body>
        <div id="contents">
            <header></header>
            <contents></contents>
            <footer></footer>
        </div>
        <!-- <div style="background: red">aaa</div> -->

        <!-- Font Awesome -->
        <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>

        <!-- Bootstrap -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
        <script src="./bootstrap-4.0.0-alpha.6-dist/js/bootstrap.min.js"></script>

        <!-- Mapbox -->
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.css' rel='stylesheet' />

        <!-- Riot -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/riot/3.7.3/riot+compiler.min.js"></script>
        <script src="./js/import.js"></script>
        <script>riot.mount('*');</script>

        <script>
            window.onload = function () {

                /* Web サイトの初期化 */
                siteInit();

                /* スクロールイベント */
                $(window).on('scroll', function() {

                    /* スクロール量 */
                    var y = jQuery(this).scrollTop();

                    var scrollHeight = $(document).height();
	                var scrollPosition = $(window).height() + y;

                    /* 少しでも下にスクロールした場合 */
                    if (y >= 10) {
                        // $('#footer').fadeOut(100);
                        $('#arrow-up').fadeIn(300);
                    }
                    else {
                        // $('#footer').fadeIn(100);
                        $('#arrow-up').fadeOut(300);
                    }

                    /* アンダーコンテンツ 1 が見えてきたら */
                    var page_view_point = document.body.scrollHeight / 4 - document.body.scrollHeight / 8;
                    if (y >= page_view_point) {
                        $('#page-local-text').html('<i class="fas fa-info"></i> このサイトについて');
                        $('#page-local-text').fadeIn(500);
                        $('#under-area-01').fadeIn(500);
                    }
                    else if (y < page_view_point) {
                        $('#page-local-text').fadeOut(100);
                    }
                    else {
                        $('#under-area-01').fadeOut(500);
                    }

                    /* アンダーコンテンツ 2 が見えてきたら */
                    page_view_point = document.body.scrollHeight / 2 - document.body.scrollHeight / 8;
                    if (y >= page_view_point) {
                        $('#page-local-text').html('<i class="far fa-chart-bar"></i> オープンデータとは');
                        $('#under-area-02').fadeIn(500);
                    }
                    else {
                        $('#under-area-02').fadeOut(500);
                    }

                    /* アンダーコンテンツ 3 が見えてきたら */
                    page_view_point = document.body.scrollHeight / 2 + document.body.scrollHeight / 8;
                    if (y >= page_view_point) {
                        $('#page-local-text').html('<i class="fas fa-mobile"></i> スマートフォン向け');
                        $('#under-area-03').fadeIn(500);
                    }
                    else {
                        $('#under-area-03').fadeOut(500);
                    }

                    /*スクロールの位置が下部5%の範囲に来た場合 */
                    if ((scrollHeight - scrollPosition) / scrollHeight < 0.03) {
                        $('#footer').fadeIn(100);
                        $('#arrow-down').fadeOut(300);
                	}
                    /*それ以外のスクロールの位置の場合 */
                    else {

                        if (y === 0) {
                            $('#footer').fadeIn(100);
                        }else {
                            $('#footer').fadeOut(100);
                        }

                        $('#arrow-down').fadeIn(300);
                	}

                });

            };
    	</script>

    </body>

</html>
